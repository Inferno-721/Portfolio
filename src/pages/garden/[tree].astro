---
import Heading from "@/components/Heading.astro";
import BaseLayout from "@/layouts/BaseLayout.astro";
import BackLink from "@/components/garden/BackLink.astro";
import GardenHeader from "@/components/garden/GardenHeader.astro";
import LeafCard from "@/components/garden/LeafCard.astro";
import { SITE } from "@/consts";
import { trees, metadata } from "@garden";
export const prerender = false;
// For server-side rendering, we need to get the tree from the params
const { tree: treeSlug } = Astro.params;
const tree = trees.find((t) => t.slug === treeSlug);

// Handle case where tree doesn't exist
if (!tree) {
  return Astro.redirect('/garden');
}
---

<BaseLayout title={tree.name} description={tree.description}>
  <div class="container mx-auto pt-24 pb-12 md:pt-32 xl:pt-24">
    <BackLink href="/garden/" text="Back to Garden" />
    <GardenHeader title={tree.name} description={tree.description} />

    <div class="space-y-6">
      {tree.leaves.map((leaf) => (
        <LeafCard leaf={leaf} treeSlug={tree.slug} metadata={metadata} />
      ))}
    </div>
  </div>
</BaseLayout>
